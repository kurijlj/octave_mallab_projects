% -----------------------------------------------------------------------------
%
% Function 'ItemEditView':
%
% Use:
%       -- handles = ItemEditView(hparent)
%
% Description:
%          Panel containing fields for editing items.
%
% -----------------------------------------------------------------------------
function handles = ItemEditView(hparent, name, uistyle, item)
    fname = 'ItemEditView';
    use_case_a = ' -- handles = ItemEditView(hparent)';

    % Validate input arguments ------------------------------------------------
    if(~ishghandle(hparent))
        error( ...
            '%s: hparent must be handle to a graphics object', ...
            fname
            );

    endif;

    if(~ischar(name))  % name can be an empty string
        error( ...
            '%s: name must be a character array', ...
            fname
            );

    endif;

    if(~isa(uistyle, 'AppUiStyle'))
        error( ...
            '%s: uistyle must be an instance of the "AppUiStyle" class', ...
            fname ...
            );

    endif;

    if(~isa(item, 'Item'))
        error( ...
            '%s: item must be an instance of the "Item" class', ...
            fname ...
            );

    endif;

    % Create the GUI elements -------------------------------------------------
    handles = struct();

    % Create panel containig the view's elements
    handles.main_panel = uipanel( ...
        'parent', hparent, ...
        'title', name, ...
        'position', [0.00, 0.00, 1.00, 1.00] ...
        );

    % Create view's elements

    % Calculate positions of the view's elements
    position = itemEditViewElementsPosition(handles.main_panel, uistyle);

    % Label: Name
    handles.lbl_name = uicontrol( ...
        'parent', handles.main_panel, ...
        'style', 'text', ...
        'string', 'Item Name', ...
        'horizontalalignment', 'left', ...
        'units', 'normalized', ...
        'position', position(1, :) ...
        );

    % Edit field: Name
    handles.fld_name = uicontrol( ...
        'parent', handles.main_panel, ...
        'style', 'edit', ...
        'enable', 'on', ...
        'string', item.name, ...
        'tooltipstring', 'Edit item name', ...
        'horizontalalignment', 'left', ...
        'units', 'normalized', ...
        'position', position(2, :) ...
        );

    % Label: Value
    handles.lbl_value = uicontrol( ...
        'parent', handles.main_panel, ...
        'style', 'text', ...
        'string', 'Item Value', ...
        'horizontalalignment', 'left', ...
        'units', 'normalized', ...
        'position', position(3, :) ...
        );

    % Edit field: Value
    handles.fld_value = uicontrol( ...
        'parent', handles.main_panel, ...
        'style', 'edit', ...
        'enable', 'on', ...
        'string', item.value, ...
        'tooltipstring', 'Edit item value', ...
        'horizontalalignment', 'left', ...
        'units', 'normalized', ...
        'position', position(4, :) ...
        );

endfunction;
